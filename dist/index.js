/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";var t={621:(t,n,e)=>{e.d(n,{A:()=>c});var o=e(601),i=e.n(o),a=e(314),r=e.n(a)()(i());r.push([t.id,"@import url(https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap);"]),r.push([t.id,'/* styles.css */\n\n* {\n  box-sizing: border-box;\n}\n\n#katech-chatbot {\n  font-family: "Kanit", sans-serif !important;\n  /* position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1000;\n  width: 100vw;\n  height: 100vh;\n  overflow: hidden;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: red; */\n\n}\n\n#katech-chatbot-button-open {\n  font-family: "Kanit", sans-serif !important;\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  z-index: 1000;\n\n  transition: all 0.5s ease-in-out;\n  opacity: 1;\n}\n\n#katech-chatbot-button-open.hidden {\n  transition: all 0.5s ease-in-out;\n\n  opacity: 0;\n  bottom: -100%;\n  /* display: none; */\n}\n\n#katech-chatbot-button {\n  width: 60px;\n  height: 60px;\n  padding: 10px 10px;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n#katech-chatbot-button img {\n  width: 100%;\n  height: 100%;\n}\n\n#katech-chatbot-container {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 360px;\n  max-width: 100%;\n  max-height: 100%;\n  background-color: white;\n  border-radius: 10px;\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\n  z-index: 1000;\n  overflow: auto;\n  transition: all 0.5s ease-in-out;\n  opacity: 1;\n\n}\n\n#katech-chatbot-container.hidden {\n  transition: all 0.5s ease-in-out;\n  opacity: 0;\n  top: -100% !important;\n}\n\n#katech-chatbot-header-area {\n  position: relative;\n}\n\n#katech-chatbot-header_btn-close {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  border: 1px solid white;\n  border-radius: 4px;\n  color: white;\n  padding: 0 8px;\n  cursor: pointer;\n}\n\n#katech-chatbot-header {\n  background-color: #007bff;\n  color: white;\n  padding: 20px 16px;\n  border-bottom: 1px solid #ccc;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 12px;\n\n}\n\n#katech-chatbot-header img {\n  height: 50px;\n  border-radius: 50%;\n}\n\n#katech-chatbot-header_content {\n  display: flex;\n  flex-direction: column;\n  gap: 4px\n}\n\n#katech-chatbot-header_content .subtitle {\n  font-size: 14px;\n}\n\n#katech-chatbot-header_content .title {\n  font-size: 24px;\n  line-height: 1;\n  font-weight: 600;\n}\n\n#katech-chatbot-body {\n  padding: 16px 10px;\n  height: 400px;\n  overflow-y: auto;\n}\n\n.katech-chatbot-footer {\n  display: flex;\n  flex-direction: column;\n  background-color: #fafafa;\n  /* padding: 10px; */\n}\n\n#katech-chatbot-input {\n  font-family: "Kanit", sans-serif !important;\n  /* width: 100%; */\n  padding: 10px 16px;\n  border: none;\n  outline: none;\n  background-color: transparent;\n  border-bottom: 1px solid #cdcdce;\n  background-color: transparent !important;\n\n\n}\n#katech-chatbot-input[data-autocompleted] {\n  background-color: transparent !important;\n}\n\n#katech-chatbot-input,\n#katech-chatbot-input:-webkit-autofill,\n#katech-chatbot-input:-webkit-autofill:hover,\n#katech-chatbot-input:-webkit-autofill:focus {\n  -webkit-box-shadow: 0 0 50px rgba(255, 255, 255, 0) inset !important;\n  background-color: transparent !important;\n  background-clip: text;\n}\n\n@keyframes autofill {\n    100% {\n        background: transparent;\n        color: inherit;\n    }\n}\n\n@-webkit-keyframes autofill {\n    100% {\n        background: transparent;\n        color: inherit;\n    }\n}\n\n#katech-chatbot-footer_action {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 16px;\n  overflow: hidden;\n}\n\n#katech-chatbot-send-button {\n  font-family: "Kanit", sans-serif !important;\n  padding: 6px 16px;\n  border-radius: 99px;\n  border: none;\n  background-color: #007bff;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n}\n\n\n/* MESSAGE */\n#katech-chatbot-message {\n  margin-bottom: 24px;\n  word-wrap: break-word;\n}\n\n#katech-chatbot-message.katech-user-message-group .katech-user-message {\n  font-size: 14px;\n  border-radius: 24px 24px 0px 24px;\n  padding: 16px;\n  background-color: #1360d8;\n  color: #fafafa;\n  overflow-x: auto !important;\n}\n\n#katech-chatbot-message.katech-bot-message-group {\n  position: relative;\n  display: flex;\n  gap: 4px;\n  justify-content: flex-start;\n}\n\n#katech-chatbot-message.katech-user-message-group {\n  display: flex;\n  gap: 4px;\n  justify-content: flex-end;\n}\n\n#katech-chatbot-message.katech-bot-message-group img {\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  background: #ccc;\n}\n\n#katech-chatbot-message.katech-bot-message-group .katech-bot-message {\n  font-size: 14px;\n  border-radius: 0px 24px 24px 24px;\n  padding: 16px;\n  background-color: #dcdddea5;\n  color: #111111;\n  overflow-x: auto !important;\n}\n\n.katech-bot-message p,\n.katech-user-message p {\n  margin: 0\n}\n\n.katech-bot-message {\n  overflow-x: auto !important;\n}\n\n#katech-chatbot-message.katech-bot-message-group {\n  position: relative;\n  display: flex;\n  gap: 4px;\n  justify-content: flex-start;\n}\n\n#katech-chatbot-message.katech-bot-message-group .katech-bot-message-action {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  bottom: 0;\n  right: 0;\n  transform: translate(-10%, 40%);\n}\n\n#katech-bot-message-action__like,\n#katech-bot-message-action__dislike {\n  cursor: pointer;\n  /* background: red; */\n  color: #007bff;\n  width: 24px;\n  height: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n}\n\n.katech-bot-message-action__like__active,\n.katech-bot-message-action__dislike__active {\n  display: none;\n}\n\n#katech-bot-message-action__like.active .katech-bot-message-action__like__active,\n#katech-bot-message-action__dislike.active .katech-bot-message-action__dislike__active {\n  display: inline-block;\n}\n\n#katech-bot-message-action__like.active .katech-bot-message-action__like__inactive,\n#katech-bot-message-action__dislike.active .katech-bot-message-action__dislike__inactive {\n  display: none;\n}\n\n/* CSS GREETING */\n#katech-chatbot-greeting {\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  gap: 12px;\n}\n\n#katech-chatbot-greeting.hidden {\n  display: none;\n}\n\n#katech-chatbot-greeting img {\n  width: 80%;\n  border-radius: 50%;\n}\n\n#katech-chatbot-greeting .title {\n  font-size: 24px;\n  font-weight: 500;\n}\n\n/* HANDLE CSS TYPING */\n.typing {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 4px;\n}\n\n.typing__dot {\n  width: 8px;\n  height: 8px;\n  background: #8d8c91;\n  border-radius: 50%;\n  opacity: 0;\n  animation: loadingFade 1s infinite;\n}\n\n.typing__dot:nth-child(1) {\n  animation-delay: 0s;\n}\n\n.typing__dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.typing__dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes loadingFade {\n  0% {\n    opacity: 0;\n  }\n\n  50% {\n    opacity: 0.8;\n  }\n\n  100% {\n    opacity: 0;\n  }\n}',""]);const c=r},314:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e="",o=void 0!==n[5];return n[4]&&(e+="@supports (".concat(n[4],") {")),n[2]&&(e+="@media ".concat(n[2]," {")),o&&(e+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),e+=t(n),o&&(e+="}"),n[2]&&(e+="}"),n[4]&&(e+="}"),e})).join("")},n.i=function(t,e,o,i,a){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(o)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(r[s]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);o&&r[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),e&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=e):d[2]=e),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),n.push(d))}},n}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var n=[];function e(t){for(var e=-1,o=0;o<n.length;o++)if(n[o].identifier===t){e=o;break}return e}function o(t,o){for(var a={},r=[],c=0;c<t.length;c++){var s=t[c],l=o.base?s[0]+o.base:s[0],d=a[l]||0,u="".concat(l," ").concat(d);a[l]=d+1;var h=e(u),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==h)n[h].references++,n[h].updater(p);else{var f=i(p,o);o.byIndex=c,n.splice(c,0,{identifier:u,updater:f,references:1})}r.push(u)}return r}function i(t,n){var e=n.domAPI(n);return e.update(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,i){var a=o(t=t||[],i=i||{});return function(t){t=t||[];for(var r=0;r<a.length;r++){var c=e(a[r]);n[c].references--}for(var s=o(t,i),l=0;l<a.length;l++){var d=e(a[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}a=s}}},659:t=>{var n={};t.exports=function(t,e){var o=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}},540:t=>{t.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},56:(t,n,e)=>{t.exports=function(t){var n=e.nc;n&&t.setAttribute("nonce",n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var o="";e.supports&&(o+="@supports (".concat(e.supports,") {")),e.media&&(o+="@media ".concat(e.media," {"));var i=void 0!==e.layer;i&&(o+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),o+=e.css,i&&(o+="}"),e.media&&(o+="}"),e.supports&&(o+="}");var a=e.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),n.styleTagTransform(o,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}},113:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}}},n={};function e(o){var i=n[o];if(void 0!==i)return i.exports;var a=n[o]={id:o,exports:{}};return t[o](a,a.exports,e),a.exports}e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),e.nc=void 0;var o=e(72),i=e.n(o),a=e(825),r=e.n(a),c=e(659),s=e.n(c),l=e(56),d=e.n(l),u=e(540),h=e.n(u),p=e(113),f=e.n(p),v=e(621),g={};function b(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,o)}return e}function m(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?b(Object(e),!0).forEach((function(n){y(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):b(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function y(t,n,e){return(n=j(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function k(){k=function(){return n};var t,n={},e=Object.prototype,o=e.hasOwnProperty,i=Object.defineProperty||function(t,n,e){t[n]=e.value},a="function"==typeof Symbol?Symbol:{},r=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,n,e){return Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{l({},"")}catch(t){l=function(t,n,e){return t[n]=e}}function d(t,n,e,o){var a=n&&n.prototype instanceof b?n:b,r=Object.create(a.prototype),c=new C(o||[]);return i(r,"_invoke",{value:S(t,e,c)}),r}function u(t,n,e){try{return{type:"normal",arg:t.call(n,e)}}catch(t){return{type:"throw",arg:t}}}n.wrap=d;var h="suspendedStart",p="suspendedYield",f="executing",v="completed",g={};function b(){}function m(){}function y(){}var x={};l(x,r,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(P([])));_&&_!==e&&o.call(_,r)&&(x=_);var j=y.prototype=b.prototype=Object.create(x);function L(t){["next","throw","return"].forEach((function(n){l(t,n,(function(t){return this._invoke(n,t)}))}))}function M(t,n){function e(i,a,r,c){var s=u(t[i],t,a);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==E(d)&&o.call(d,"__await")?n.resolve(d.__await).then((function(t){e("next",t,r,c)}),(function(t){e("throw",t,r,c)})):n.resolve(d).then((function(t){l.value=t,r(l)}),(function(t){return e("throw",t,r,c)}))}c(s.arg)}var a;i(this,"_invoke",{value:function(t,o){function i(){return new n((function(n,i){e(t,o,n,i)}))}return a=a?a.then(i,i):i()}})}function S(n,e,o){var i=h;return function(a,r){if(i===f)throw Error("Generator is already running");if(i===v){if("throw"===a)throw r;return{value:t,done:!0}}for(o.method=a,o.arg=r;;){var c=o.delegate;if(c){var s=I(c,o);if(s){if(s===g)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(i===h)throw i=v,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);i=f;var l=u(n,e,o);if("normal"===l.type){if(i=o.done?v:p,l.arg===g)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(i=v,o.method="throw",o.arg=l.arg)}}}function I(n,e){var o=e.method,i=n.iterator[o];if(i===t)return e.delegate=null,"throw"===o&&n.iterator.return&&(e.method="return",e.arg=t,I(n,e),"throw"===e.method)||"return"!==o&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+o+"' method")),g;var a=u(i,n.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,g;var r=a.arg;return r?r.done?(e[n.resultName]=r.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=t),e.delegate=null,g):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function O(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function T(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function P(n){if(n||""===n){var e=n[r];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var i=-1,a=function e(){for(;++i<n.length;)if(o.call(n,i))return e.value=n[i],e.done=!1,e;return e.value=t,e.done=!0,e};return a.next=a}}throw new TypeError(E(n)+" is not iterable")}return m.prototype=y,i(j,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:m,configurable:!0}),m.displayName=l(y,s,"GeneratorFunction"),n.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===m||"GeneratorFunction"===(n.displayName||n.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(j),t},n.awrap=function(t){return{__await:t}},L(M.prototype),l(M.prototype,c,(function(){return this})),n.AsyncIterator=M,n.async=function(t,e,o,i,a){void 0===a&&(a=Promise);var r=new M(d(t,e,o,i),a);return n.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},L(j),l(j,s,"Generator"),l(j,r,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var n=Object(t),e=[];for(var o in n)e.push(o);return e.reverse(),function t(){for(;e.length;){var o=e.pop();if(o in n)return t.value=o,t.done=!1,t}return t.done=!0,t}},n.values=P,C.prototype={constructor:C,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!n)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function i(o,i){return c.type="throw",c.arg=n,e.next=o,i&&(e.method="next",e.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],c=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var s=o.call(r,"catchLoc"),l=o.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(t,n){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=n,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(r)},complete:function(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),g},finish:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),T(e),g}},catch:function(t){for(var n=this.tryEntries.length-1;n>=0;--n){var e=this.tryEntries[n];if(e.tryLoc===t){var o=e.completion;if("throw"===o.type){var i=o.arg;T(e)}return i}}throw Error("illegal catch attempt")},delegateYield:function(n,e,o){return this.delegate={iterator:P(n),resultName:e,nextLoc:o},"next"===this.method&&(this.arg=t),g}},n}function x(t,n,e,o,i,a,r){try{var c=t[a](r),s=c.value}catch(t){return void e(t)}c.done?n(s):Promise.resolve(s).then(o,i)}function w(t){return function(){var n=this,e=arguments;return new Promise((function(o,i){var a=t.apply(n,e);function r(t){x(a,o,i,r,c,"next",t)}function c(t){x(a,o,i,r,c,"throw",t)}r(void 0)}))}}function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function _(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,j(o.key),o)}}function j(t){var n=function(t,n){if("object"!=E(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var o=e.call(t,"string");if("object"!=E(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(n)?n:n+""}g.styleTagTransform=f(),g.setAttributes=d(),g.insert=s().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=h(),i()(v.A,g),v.A&&v.A.locals&&v.A.locals;var L=function(){return t=function t(n,e){if(function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof n)this.fetchConfig(n);else{if("object"!==E(n))throw new Error("Invalid configuration type");this.initConfig(n)}},n=[{key:"fetchConfig",value:function(t){var n=this;fetch(t).then((function(t){return t.json()})).then((function(t){n.initConfig(t)})).catch((function(t){console.error("Error loading configuration:",t)}))}},{key:"initConfig",value:function(t){var n,e,o;if(!t.apiKey)throw new Error("API key is required");this.apiKey=t.apiKey,this.loadStyles(),this.initUI(null==t?void 0:t.ui),this.ui=null==t?void 0:t.ui,this.config=t,this.conversationId=null!==(n=t.conversationId)&&void 0!==n?n:null,this.userId=null!==(e=t.userId)&&void 0!==e?e:null,this.botId=null!==(o=t.botId)&&void 0!==o?o:null,this.loadMarkedLibrary(),this.loadHighlightLibrary(),this.initWebSocket(),this.WS_URL_8080="ws://46.250.249.219:8000/ws/",this.messageString="",this.currentMessageElement=null,this.loading=!1}},{key:"loadStyles",value:function(){var t=document.createElement("link");t.rel="stylesheet",t.href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css",document.head.appendChild(t);var n=document.createElement("link");n.rel="stylesheet",n.href="src/css/styles.css",document.head.appendChild(n)}},{key:"loadMarkedLibrary",value:function(){var t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/markdown.js/0.5.0/markdown.min.js",document.head.appendChild(t),t.onload=function(){console.log("marked.js đã được tải thành công!")}}},{key:"loadHighlightLibrary",value:function(){var t=document.createElement("script");t.src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js",document.head.appendChild(t),t.onload=function(){console.log("highlight.js đã được tải thành công!"),hljs.highlightAll()}}},{key:"initUI",value:function(t){var n,e,o,i,a,r,c,s,l,d,u,h,p,f,v,g,b,m,y,k,x,w,E,_=this,j=document.createElement("div");j.innerHTML='\n    <div id="katech-chatbot">\n    <div id="katech-chatbot-button-open">\n    '.concat(null!=t&&null!==(n=t.open)&&void 0!==n&&n.html?null==t||null===(e=t.open)||void 0===e?void 0:e.html:'<button style="'.concat(null==t||null===(o=t.open)||void 0===o?void 0:o.style,'" id="katech-chatbot-button"> <img src="').concat(null==t||null===(i=t.open)||void 0===i?void 0:i.image,'" alt=""></button>'),'\n       \n    </div>\n    <div  id="katech-chatbot-container" class="hidden" >\n        <div id="katech-chatbot-header-area">\n        ').concat(null!=t&&null!==(a=t.header)&&void 0!==a&&a.html?null==t||null===(r=t.header)||void 0===r?void 0:r.html:'<div style="'.concat(null==t||null===(c=t.header)||void 0===c?void 0:c.style,'" id="katech-chatbot-header" class="katech-chatbot-header">\n                  <img\n                      src="').concat(null==t||null===(s=t.bot)||void 0===s?void 0:s.avatar,'" />\n                  <div id="katech-chatbot-header_content" style="">\n                      <span class="subtitle">Chat with</span>\n                      <span class="title">').concat(null==t||null===(l=t.bot)||void 0===l?void 0:l.name,'</span>\n                  </div>\n              </div>\n              <div style="border-color:').concat(null==t||null===(d=t.bot)||void 0===d?void 0:d.color,";color:").concat(null==t||null===(u=t.bot)||void 0===u?void 0:u.color,'" id="katech-chatbot-header_btn-close">-</div>\n          </div>'),'\n        <div style="').concat(null==t||null===(h=t.body)||void 0===h?void 0:h.style,'" id="katech-chatbot-body" class="katech-chatbot-body">\n        <div style="').concat(null==t||null===(p=t.greeting)||void 0===p?void 0:p.style,'" id="katech-chatbot-greeting">\n        ').concat(null!=t&&null!==(f=t.greeting)&&void 0!==f&&f.html?null==t||null===(v=t.greeting)||void 0===v?void 0:v.html:'\n            <img src="'.concat(null==t||null===(g=t.greeting)||void 0===g?void 0:g.image,'" />\n            <div id="">\n                <span class="title">').concat(null==t||null===(b=t.greeting)||void 0===b?void 0:b.title,"</span>\n            </div>"),'\n          </div>\n        </div>\n        <div id="katech-chatbot-footer-area">\n        ').concat(null!=t&&null!==(m=t.footer)&&void 0!==m&&m.html?null==t||null===(y=t.footer)||void 0===y?void 0:y.html:'<div style="'.concat(null==t||null===(k=t.footer)||void 0===k?void 0:k.style,'" id="katech-chatbot-footer" class="katech-chatbot-footer">\n                  <input id="katech-chatbot-input" type="text" class="katech-chatbot-input"\n                    placeholder="Type your message...">\n                  <div id="katech-chatbot-footer_action">\n                    <div>\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M9 7a5 5 0 0 1 10 0v8a7 7 0 1 1-14 0V9a1 1 0 0 1 2 0v6a5 5 0 0 0 10 0V7a3 3 0 1 0-6 0v8a1 1 0 1 0 2 0V9a1 1 0 1 1 2 0v6a3 3 0 1 1-6 0z" clip-rule="evenodd"></path></svg>\n                    </div>\n                    <button style="background:').concat(null==t||null===(x=t.bot)||void 0===x?void 0:x.background,"; color:").concat(null==t||null===(w=t.bot)||void 0===w?void 0:w.color,'" id="katech-chatbot-send-button" class="katech-chatbot-send-button">\n                      Send\n                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill:').concat(null==t||null===(E=t.bot)||void 0===E?void 0:E.color,';transform: ;msFilter:;">\n                        <path d="m21.426 11.095-17-8A.999.999 0 0 0 3.03 4.242L4.969 12 3.03 19.758a.998.998 0 0 0 1.396 1.147l17-8a1 1 0 0 0 0-1.81zM5.481 18.197l.839-3.357L12 12 6.32 9.16l-.839-3.357L18.651 12l-13.17 6.197z"></path>\n                      </svg>\n                    </button>\n                  </div>\n                </div>\n                '),"\n        </div>\n    </div>\n</div>"),document.body.appendChild(j);var L=document.getElementById("katech-chatbot-button-open"),M=document.getElementById("katech-chatbot-header_btn-close"),S=document.getElementById("katech-chatbot-container"),I=function(){S.classList.toggle("hidden"),L.classList.toggle("hidden")};L.addEventListener("click",I),M.addEventListener("click",I);var O=document.getElementById("katech-chatbot-send-button"),T=document.getElementById("katech-chatbot-input");document.getElementById("katech-chatbot-body"),O.addEventListener("click",(function(){var t=T.value.trim();t&&(_.sendMessage(t),T.value="")})),T.addEventListener("keypress",(function(t){if("Enter"===t.key){var n=T.value.trim();n&&(_.sendMessage(n),T.value="")}}))}},{key:"loadMessages",value:(o=w(k().mark((function t(){var n,e,o=this;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.getElementById("katech-chatbot-body").innerHTML="",t.prev=2,t.next=5,fetch("http://46.250.249.219:8000/api/v1/conversation/".concat(this.conversationId),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey),"X-Sub":this.userId}});case 5:if((n=t.sent).ok){t.next=8;break}throw new Error("Failed to fetch data");case 8:return t.next=10,n.json();case 10:delete(e=t.sent).data.messageMap.system,Object.keys(e.data.messageMap).map((function(t){return e.data.messageMap[t]})).forEach((function(t){var n=markdown.toHTML(t.content[0].body);o.displayMessage(n,t.role)})),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.error("Error loading messages:",t.t0);case 19:case"end":return t.stop()}}),t,this,[[2,16]])}))),function(){return o.apply(this,arguments)})},{key:"sendMessage",value:(e=w(k().mark((function t(n){var e,o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.loading=!0,this.currentMessageElement=null,this.messageString="",this.displayMessage(n,"user"),this.showLoadingMessage(),this.hideGreetingMessage(),e={role:"user",content:[{contentType:"text",body:n}],model:"claude-v3-haiku",parentMessageId:null,messageId:null},t.next=10,fetch("http://46.250.249.219:8000/api/v1/conversation/stream?access_token=".concat(this.apiKey),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey),"X-Sub":this.userId},body:JSON.stringify({conversationId:this.conversationId,botId:this.botId,message:m(m({},e),{},{parentMessageId:null})}),timeout:3e4});case 10:return o=t.sent,t.next=13,o.json();case 13:t.sent,t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.error("Error sending message:",t.t0);case 19:case"end":return t.stop()}}),t,this,[[0,16]])}))),function(t){return e.apply(this,arguments)})},{key:"showLoadingMessage",value:function(){var t,n,e,o,i,a,r,c=document.getElementById("katech-chatbot-body");c.insertAdjacentHTML("beforeend",'\n      <div id="katech-chatbot-message" class="katech-bot-message-group katech-chatbot-loading-message">\n          <img src="'.concat(null===(t=this.ui)||void 0===t||null===(t=t.bot)||void 0===t?void 0:t.avatar,'" />\n          <div style="').concat(null===(n=this.ui)||void 0===n||null===(n=n.body)||void 0===n||null===(n=n.message)||void 0===n||null===(n=n.out)||void 0===n?void 0:n.style,'" class="katech-bot-message">\n          ').concat(null!==(e=this.ui)&&void 0!==e&&null!==(e=e.loading)&&void 0!==e&&e.html?null===(o=this.ui)||void 0===o||null===(o=o.loading)||void 0===o?void 0:o.html:'\n            <div class="typing">\n            <div style="'.concat(null===(i=this.ui)||void 0===i||null===(i=i.loading)||void 0===i?void 0:i.style,'" class="typing__dot"></div>\n            <div style="').concat(null===(a=this.ui)||void 0===a||null===(a=a.loading)||void 0===a?void 0:a.style,'" class="typing__dot"></div>\n            <div style="').concat(null===(r=this.ui)||void 0===r||null===(r=r.loading)||void 0===r?void 0:r.style,'" class="typing__dot"></div>\n          </div>'),"\n          </div>\n      </div>\n    ")),this.loadingMessageElement=c.lastElementChild,c.scrollTop=c.scrollHeight}},{key:"hideLoadingMessage",value:function(){this.loadingMessageElement&&(this.loadingMessageElement.remove(),this.loadingMessageElement=null)}},{key:"hideGreetingMessage",value:function(){document.getElementById("katech-chatbot-greeting").classList.add("hidden")}},{key:"displayMessage",value:function(t,n){var e,o=document.getElementById("katech-chatbot-body");if("user"===n)o.insertAdjacentHTML("beforeend",'\n          <div id="katech-chatbot-message" class="katech-user-message-group">\n          <div style="'.concat(null===(e=this.ui)||void 0===e||null===(e=e.body)||void 0===e||null===(e=e.message)||void 0===e||null===(e=e.in)||void 0===e?void 0:e.style,'" class="katech-user-message">').concat(t,"</div>\n          </div>\n      ")),this.currentMessageElement=null;else if("assistant"===n){var i,a;this.currentMessageElement?this.currentMessageElement.innerHTML=t:(this.hideLoadingMessage(),o.insertAdjacentHTML("beforeend",'\n          <div id="katech-chatbot-message" class="katech-bot-message-group">\n              <img src="'.concat(null===(i=this.ui)||void 0===i||null===(i=i.bot)||void 0===i?void 0:i.avatar,'" />\n              <div style="').concat(null===(a=this.ui)||void 0===a||null===(a=a.body)||void 0===a||null===(a=a.message)||void 0===a||null===(a=a.out)||void 0===a?void 0:a.style,'" class="katech-bot-message">').concat(t,"</div>\n          </div>\n        ")),this.currentMessageElement=o.lastElementChild.querySelector(".katech-bot-message"))}o.scrollTop=o.scrollHeight}},{key:"initWebSocket",value:function(){var t=this;this.socket=new WebSocket("ws://46.250.249.219:8000/ws/conversation?accessToken=".concat(this.apiKey)),this.socket.addEventListener("open",(function(t){console.log("WebSocket connection established:",t)})),this.socket.addEventListener("message",(function(n){var e=JSON.parse(n.data),o=atob(e.data.body),i=decodeURIComponent(escape(o));t.messageString+=i;var a=markdown.toHTML(t.messageString);t.displayMessage(a,"assistant")})),this.socket.addEventListener("close",(function(t){console.log("WebSocket connection closed:",t)})),this.socket.addEventListener("error",(function(t){console.error("WebSocket error observed:",t)}))}}],n&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,e,o}();window.ChatBotSDK=L})();